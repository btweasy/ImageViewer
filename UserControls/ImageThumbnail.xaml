<UserControl x:Class="ImageViewerApp.UserControls.ImageThumbnail"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="140" Height="130">

    <Grid>
        <Border Margin="5" BorderBrush="Gray" BorderThickness="1" Padding="5">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="Background" Value="Transparent"/>
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="LightGray"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>

            <StackPanel ContextMenuOpening="StackPanel_ContextMenuOpening">
                <StackPanel.ContextMenu>
                    <ContextMenu x:Name="MetadataContextMenu" />
                </StackPanel.ContextMenu>

                <Image Source="{Binding Thumbnail}"
                       Width="120"
                       Height="100"
                       Stretch="Uniform"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>

                <TextBlock Text="{Binding FileName}"
                           TextAlignment="Center"
                           Margin="0,5,0,0"
                           TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <Popup x:Name="CopyPopup"
               Placement="Mouse"
               AllowsTransparency="True"
               PopupAnimation="Fade"
               StaysOpen="False">
            <Border Background="Black"
                    CornerRadius="5"
                    Padding="5"
                    Opacity="0.8">
                <TextBlock Text="Copied!"
                           Foreground="White"
                           FontWeight="Bold"/>
            </Border>
        </Popup>
    </Grid>

</UserControl>
